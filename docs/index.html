<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detector de Gastos â€“ Evandro</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#f5f7fa;color:#333;padding:20px;max-width:600px;margin:auto}
    #cab{position:absolute;top:20px;left:20px;line-height:1.2}
    #cab span:first-child{font-size:32px;font-weight:bold}
    #cab span:last-child{font-size:14px;color:#555}
    h1{margin:80px 0 10px;font-size:28px;text-align:center}
    .item{display:flex;align-items:center;margin:12px 0}
    .item label{flex:1}
    .item span{margin-right:4px;font-weight:bold}
    input[type=number]{width:90px;padding:4px;text-align:right}
    button{background:#111;color:#fff;border:none;padding:12px 24px;border-radius:4px;font-size:16px;cursor:pointer}
    #resultado{background:#fff;padding:15px;border-radius:8px;margin-top:20px}
    #shareCanvas{border:1px solid #ddd;margin-top:15px;border-radius:8px}
  </style>
</head>
<body>

  <div id="cab">
    <span>Evandro</span><br>
    <span>Planejador Financeiro</span>
  </div>

  <h1>Detector de Gastos</h1>

  <p style="margin:0 0 20px;font-size:15px;color:#555;text-align:center">
    Digite quanto vocÃª gasta com cada item e clique em <strong>Ver resultado</strong>.
  </p>

  <div id="inputs"></div>
  <button onclick="calcular()">Ver resultado</button>
  <div id="resultado"></div>
  <canvas id="shareCanvas" width="600" height="450" style="display:none;"></canvas>

  <script>
    const lista = [
      {id:"cafe",  txt:"â˜• CafÃ©, snacks e lanches",                    icone:"â˜•", tipo:"dia"},
      {id:"fora",  txt:"ðŸ½ï¸ RefeiÃ§Ãµes fora",      icone:"ðŸ½ï¸", tipo:"sem"},
      {id:"deli",  txt:"ðŸ” Delivery",            icone:"ðŸ”", tipo:"sem"},
      {id:"assi",  txt:"ðŸ“º Assinaturas esquecidas", icone:"ðŸ“º", tipo:"mes"},
      {id:"apps",  txt:"ðŸ“± Apps extras",            icone:"ðŸ“±", tipo:"mes"},
      {id:"presente",txt:"ðŸ›’ Compras on-line por impulso", icone:"ðŸ›’", tipo:"mes"},
      {id:"multa", txt:"ðŸš— Uber para pequenos trajetos que podem ser evitados", icone:"ðŸš—", tipo:"mes"},
      {id:"carro", txt:"ðŸ’³ Anuidade de cartÃ£o de crÃ©dito", icone:"ðŸ’³", tipo:"mes"},
      {id:"beleza",txt:"âœ‚ï¸ Beleza/Barba",           icone:"âœ‚ï¸", tipo:"mes"}
    ];

    const box = document.getElementById("inputs");
    lista.forEach(o=>{
      const d = document.createElement("div");
      d.className = "item";
      d.innerHTML = `
        <label>${o.txt}</label>
        <span>R$</span>
        <input type="number" id="${o.id}" min="0" step="0.01" placeholder="0,00">
      `;
      box.appendChild(d);
    });

    function calcular(){
      let totalMes = 0;
      lista.forEach(o=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        const valor = o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v;
        totalMes += valor;
      });
      const totalAno = totalMes * 12;

      document.getElementById("resultado").innerHTML = `
        <h2>Resumo dos gastos</h2>
        <p><strong>Total no mÃªs:</strong> R$ ${totalMes.toFixed(2)}</p>
        <p><strong>Valor total gasto no ano:</strong> R$ ${totalAno.toFixed(2)}</p>
        <button onclick="gerarImagem()">Gerar imagem</button>
      `;
    }

    function gerarImagem(){
      const c = document.getElementById("shareCanvas");
      const x = c.getContext("2d");
      c.style.display = "block";
      x.fillStyle = "#111";
      x.fillRect(0,0,600,450);
      x.fillStyle = "#fff";
      x.font = "bold 28px sans-serif";
      x.fillText("Detector de Gastos â€“ Evandro",40,60);
      x.font = "20px sans-serif";
      let y = 120;
      lista.forEach(o=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        const valor = o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v;
        x.fillText(`${o.txt}: R$ ${valor.toFixed(2)}`,40,y);
        y+=30;
      });

      const totalMes = lista.reduce((s,o)=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        return s + (o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v);
      },0);
      const totalAno = totalMes * 12;

      x.fillStyle = "#ffcc00";
      x.font = "bold 24px sans-serif";
      x.fillText(`Total mÃªs: R$ ${totalMes.toFixed(2)}`,40,400);
      x.fillText(`Total ano: R$ ${totalAno.toFixed(2)}`,40,430);

      alert("Imagem gerada! Toque e segure para salvar e postar nos stories.");
    }
  </script>
</body>
</html>
