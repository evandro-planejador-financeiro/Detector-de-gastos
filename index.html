<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detector de Gastos â€“ Evandro</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#f5f7fa;color:#333;padding:20px;max-width:600px;margin:auto}
    #cab{position:absolute;top:20px;left:20px;line-height:1.2}
    #cab span:first-child{font-size:32px;font-weight:bold}
    #cab span:last-child{font-size:14px;color:#555}
    h1{margin:80px 0 10px;font-size:28px;text-align:center}
    .item{display:flex;align-items:center;margin:12px 0}
    .item label{flex:1}
    .item span{margin-right:4px;font-weight:bold}
    input[type=number]{width:90px;padding:4px;text-align:right}
    button{background:#111;color:#fff;border:none;padding:12px 24px;border-radius:4px;font-size:16px;cursor:pointer}
    #resultado{background:#fff;padding:15px;border-radius:8px;margin-top:20px}
    #shareCanvas{border:1px solid #ddd;margin-top:15px;border-radius:8px}
  </style>
</head>
<body>

  <div id="cab">
    <span>Evandro</span><br>
    <span>Planejador Financeiro</span>
  </div>

  <h1>Detector de Gastos</h1>

  <div id="inputs"></div>
  <button onclick="calcular()">Ver resultado</button>
  <div id="resultado"></div>
  <canvas id="shareCanvas" width="600" height="400" style="display:none;"></canvas>

  <script>
    const lista = [
      {id:"cafe",  txt:"â˜• CafÃ© <small>(por dia)</small>",                    icone:"â˜•", tipo:"dia"},
      {id:"fora",  txt:"ğŸ½ï¸ RefeiÃ§Ãµes fora <small>(por semana)</small>",      icone:"ğŸ½ï¸", tipo:"sem"},
      {id:"deli",  txt:"ğŸ” Delivery <small>(por semana)</small>",            icone:"ğŸ”", tipo:"sem"},
      {id:"assi",  txt:"ğŸ“º Assinaturas c/ pouco uso <small>(por mÃªs)</small>", icone:"ğŸ“º", tipo:"mes"},
      {id:"apps",  txt:"ğŸ“± Apps extras <small>(por mÃªs)</small>",            icone:"ğŸ“±", tipo:"mes"},
      {id:"presente",txt:"ğŸ Presentes <small>(por mÃªs)</small>",            icone:"ğŸ", tipo:"mes"},
      {id:"multa", txt:"ğŸš¦ Multas de trÃ¢nsito <small>(por mÃªs)</small>",     icone:"ğŸš¦", tipo:"mes"},
      {id:"carro", txt:"ğŸš— Gastos com carro <small>(por mÃªs)</small>",       icone:"ğŸš—", tipo:"mes"},
      {id:"beleza",txt:"âœ‚ï¸ Beleza/Barba <small>(por mÃªs)</small>",           icone:"âœ‚ï¸", tipo:"mes"}
    ];

    const box = document.getElementById("inputs");
    lista.forEach(o=>{
      const d = document.createElement("div");
      d.className = "item";
      d.innerHTML = `
        <label>${o.txt}</label>
        <span>R$</span>
        <input type="number" id="${o.id}" min="0" step="0.01" placeholder="0,00">
      `;
      box.appendChild(d);
    });

    function calcular(){
      let total = 0, max = {v:0,n:""};
      lista.forEach(o=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        const valor = o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v;
        total += valor;
        if(valor>max.v){max.v=valor;max.n=o.txt;}
      });

      document.getElementById("resultado").innerHTML = `
        <h2>Resumo dos gastos</h2>
        <p><strong>Total no mÃªs:</strong> R$ ${total.toFixed(2)}</p>
        <p><strong>Maior gasto:</strong> ${max.n.replace(/<.*?>/g,"")} â€“ R$ ${max.v.toFixed(2)}</p>
        <button onclick="gerarImagem()">Gerar imagem</button>
      `;
    }

    function gerarImagem(){
      const c = document.getElementById("shareCanvas");
      const x = c.getContext("2d");
      c.style.display = "block";
      x.fillStyle = "#111";
      x.fillRect(0,0,600,400);
      x.fillStyle = "#fff";
      x.font = "bold 28px sans-serif";
      x.fillText("Detector de Gastos â€“ Evandro",40,60);
      x.font = "20px sans-serif";
      let y = 120;
      lista.forEach(o=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        const valor = o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v;
        x.fillText(`${o.txt.replace(/<.*?>/g,"")}: R$ ${valor.toFixed(2)}`,40,y);
        y+=30;
      });
      x.fillStyle = "#ffcc00";
      x.font = "bold 24px sans-serif";
      const total = lista.reduce((s,o)=>{
        const v = parseFloat(document.getElementById(o.id).value)||0;
        return s + (o.tipo==="dia" ? v*30 : o.tipo==="sem" ? v*4 : v);
      },0);
      x.fillText(`Total mÃªs: R$ ${total.toFixed(2)}`,40,360);
      alert("Imagem gerada! Toque e segure para salvar e postar nos stories.");
    }
  </script>
</body>
</html>
